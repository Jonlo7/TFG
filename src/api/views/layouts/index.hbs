<!DOCTYPE html>
<html lang="es">

<head>
  {{> head}}
  <style>
    header {
      display: flex;
      gap: 10px; 
      padding: 10px;
      border-bottom: 1px solid #ccc;
      background-color: #fff;
      position: fixed;
      width: 100%;
      z-index: 50;
      box-sizing: border-box;
      overflow-x: auto; 
      white-space: nowrap;
    }

    header a,
    header button {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 8px 12px;
      text-decoration: none;
      font-size: 14px;
      color: #000;
      background-color: #f8f8f8;
      white-space: nowrap;
      min-width: 160px; 
      box-sizing: border-box;
    }

    header a:hover,
    header button:hover {
      background-color: #e0e0e0;
      border-color: #888;
    }

    header .flex-1 {
      flex-grow: 1;
    }

     header svg, header img {
      flex-shrink: 0; 
    }

    .btn-contraseña {
      min-width: 220px; 
    }

    .machine-button {
      margin-bottom: 20px; /* Ajusta el valor según el espacio deseado */
    }

  </style>
</head>

<body class="h-full w-full dark:bg-gray-800 text-gray-900 dark:text-gray-100">
  <div class="h-full w-full overflow-hidden">

    {{> confirmdialog }}

    <header class="flex gap-5 p-4 border-b overflow-x-auto bg-white dark:bg-gray-800 fixed w-full z-50">
      <a href="/"
        class="hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5 {{#ifEquals '' path}}bg-gray-400 text-white{{/ifEquals}}">
        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd"
            d="M11.293 3.293a1 1 0 0 1 1.414 0l6 6 2 2a1 1 0 0 1-1.414 1.414L19 12.414V19a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-3h-2v3a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2v-6.586l-.293.293a1 1 0 0 1-1.414-1.414l2-2 6-6Z"
            clip-rule="evenodd" />
        </svg>
        Planta
      </a>
      <div class="relative">
        <button id="maquinas-btn" class="hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5">
          <img src="/styles/icon/maquina-robotica.png" class="w-6 h-6" alt="Maquinas">
          Maquinas
        </button>
        <div id="maquinas-menu" class="hidden absolute bg-white dark:bg-gray-800 border border-gray-400 rounded-lg shadow-lg mt-2 py-2 w-48 z-50">
          <a href="/maquina-llenadora" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Llenadora</a>
          <a href="/maquina-no-disponible" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Encorchadora</a>
          <a href="/maquina-no-disponible" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Encapsuladora</a>
          <a href="/maquina-no-disponible" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Termoselladora</a>
          <a href="/maquina-no-disponible" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Etiquetadora</a>
          <a href="/maquina-no-disponible" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700">Empaquetadora</a>
        </div>
      </div>
      <a href="/historicos"
        class="hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5">
        <img src="/styles/icon/datos.png" class="w-6 h-6" alt="Historicos">
        Historicos
      </a>
      {{#if isAdmin}}
      <a href="/admin"
          class="hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5">
          <img src="/styles/icon/administrador.png" class="w-6 h-6" alt="Admin">
          Admin
        </a>
       {{/if}} 
      <div class="flex-1"></div>

  

      <a href="/modify-trabajador"
        class="btn-contraseña hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5 {{#ifEquals 'modify-user' path}}bg-gray-400 text-white{{/ifEquals}}">
        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd"
            d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4h-4Z"
            clip-rule="evenodd" />
        </svg>
        Actualizar contraseña
      </a>

      <button onclick="logout()"
        class="hover:text-white border-2 border-gray-400 hover:bg-gray-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 flex items-center gap-5">
        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
          viewBox="0 0 24 24">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M16 12H4m12 0-4 4m4-4-4-4m3-4h2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-2" />
        </svg>
        Logout
      </button>
    </header>
    <main class="pt-24 p-4 space-x-0 space-y-3 lg:flex lg:space-x-3 overflow-auto">
      {{{body}}}
    </main>
  </div>

  <script>
    async function logout() {
      if (!(await ask('Are you sure you want to logout?', 'You will be logged out of the application'))) {
        return;
      }
      window.location.replace('/logout');
    }
    // JavaScript para mostrar/ocultar el menú desplegable
    document.getElementById('maquinas-btn').addEventListener('click', function () {
      const menu = document.getElementById('maquinas-menu');
      menu.classList.toggle('hidden');
    })

    // Cerrar el menú cuando se hace clic fuera de él
    window.addEventListener('click', function(e) {
      const menuBtn = document.getElementById('maquinas-btn');
      const menu = document.getElementById('maquinas-menu');
      if (!menu.contains(e.target) && !menuBtn.contains(e.target)) {
        menu.classList.add('hidden');
      }
    })
  </script>
</body>

</html>